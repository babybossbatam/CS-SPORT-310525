"use strict";(self.webpackChunkcra=self.webpackChunkcra||[]).push([[123],{63678:function(e,t,r){r.r(t),r.d(t,{LiveMatchTrackerModuleComponent:function(){return ue},LiveMatchTrackerModuleComponentProps:function(){return se},default:function(){return de}});var a=r(89379),i=r(92901),n=r(23029),o=r(39874),c=r(85501),l=r(49198),s=r(60436),u=r(94790),h=r(22300),d=r(31279),M=r(80256),v=function(e){function LiveMatchTrackerModuleTerms(){var e;(0,n.A)(this,LiveMatchTrackerModuleTerms);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(e=(0,o.A)(this,LiveMatchTrackerModuleTerms,[].concat(r))).GAME_OPTA_LAW_TITLE="Live Action",e}return(0,c.A)(LiveMatchTrackerModuleTerms,e),(0,i.A)(LiveMatchTrackerModuleTerms)}(r(67).h),p=function(e){function LiveMatchTrackerModuleConfig(e){return(0,n.A)(this,LiveMatchTrackerModuleConfig),(0,o.A)(this,LiveMatchTrackerModuleConfig,["liveMatchTrackerModule",null,e])}return(0,c.A)(LiveMatchTrackerModuleConfig,e),(0,i.A)(LiveMatchTrackerModuleConfig)}(M.O);p.injectables=[v];var T,k,A,L,f=r(54167),g=r(5182),y=r(793),m=r(88358),D=(r(60897),r(50565)),E=r(49116),H=r(58272),w=r(30396),b=r(8791),S=r(8670),C=r(48841),I=(L=function(e){function LiveMatchTrackerModuleState(){var e;(0,n.A)(this,LiveMatchTrackerModuleState);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=(0,o.A)(this,LiveMatchTrackerModuleState,[].concat(r)),(0,f.A)(e,"height",k,e),(0,f.A)(e,"isVisible",A,e),e}return(0,c.A)(LiveMatchTrackerModuleState,e),(0,i.A)(LiveMatchTrackerModuleState,[{key:"widget",get:function get(){var e,t,r;return null===(e=this.dataSource)||void 0===e||null===(t=e.game)||void 0===t||null===(r=t.widgets)||void 0===r?void 0:r.first()}},{key:"url",get:function get(){return this.widget.url.ensureHttps()}},{key:"ratio",get:function get(){return this.widget.ratio}},{key:"isPopulated",get:function get(){return!this.appSettings.isWidget&&(0,g.A)(LiveMatchTrackerModuleState,"isPopulated",this,1)&&this.widget}},{key:"gameId",get:function get(){var e,t;return null===(e=this.dataSource)||void 0===e||null===(t=e.game)||void 0===t?void 0:t.id}},{key:"gameStatus",get:function get(){var e,t;return null===(e=this.dataSource)||void 0===e||null===(t=e.game)||void 0===t?void 0:t.statusGroup}}])}(m.R),L.injectables=[].concat((0,s.A)(D.d.injectables),[C.e,E.t,H.i,w.B,b.h,S.B,p]),T=L,k=(0,y.A)(T.prototype,"height",[d.sH],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),A=(0,y.A)(T.prototype,"isVisible",[d.sH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,y.A)(T.prototype,"widget",[d.EW],Object.getOwnPropertyDescriptor(T.prototype,"widget"),T.prototype),(0,y.A)(T.prototype,"url",[d.EW],Object.getOwnPropertyDescriptor(T.prototype,"url"),T.prototype),(0,y.A)(T.prototype,"ratio",[d.EW],Object.getOwnPropertyDescriptor(T.prototype,"ratio"),T.prototype),(0,y.A)(T.prototype,"isPopulated",[d.$Z],Object.getOwnPropertyDescriptor(T.prototype,"isPopulated"),T.prototype),(0,y.A)(T.prototype,"gameId",[d.EW],Object.getOwnPropertyDescriptor(T.prototype,"gameId"),T.prototype),(0,y.A)(T.prototype,"gameStatus",[d.EW],Object.getOwnPropertyDescriptor(T.prototype,"gameStatus"),T.prototype),T),_=function(e){function LiveMatchTrackerModuleStore(){return(0,n.A)(this,LiveMatchTrackerModuleStore),(0,o.A)(this,LiveMatchTrackerModuleStore,arguments)}return(0,c.A)(LiveMatchTrackerModuleStore,e),(0,i.A)(LiveMatchTrackerModuleStore,[{key:"initialize",value:function initialize(){this.setLMTHeight=(0,d.XI)(this.setLMTHeight.bind(this))}},{key:"setLMTHeight",value:function setLMTHeight(e){this.state.height=e}}])}(h.T);_.injectables=[p,I];var P=r(3580),j=r(78981),O={heightCalculation:"heightCalculation",onDisplayHandler:"onDisplayHandler"},x={FIXED_DIGITS_NUMBER:2,ACTION_TYPES:{onLoadLiveTracker:"onLoadLiveTracker",onDisplayLiveTracker:"onDisplayLiveTracker"},EVENT_NAMES:{load:"load",display:"display"},MARGIN:{mobile:"-48px 0px 0px 0px",desktop:"-64px 0px 0px 0px"}},N=function(e){function LiveMatchTrackerModuleFetchHandler(){return(0,n.A)(this,LiveMatchTrackerModuleFetchHandler),(0,o.A)(this,LiveMatchTrackerModuleFetchHandler,arguments)}return(0,c.A)(LiveMatchTrackerModuleFetchHandler,e),(0,i.A)(LiveMatchTrackerModuleFetchHandler,[{key:"onUnloaded",value:function onUnloaded(){(0,g.A)(LiveMatchTrackerModuleFetchHandler,"onUnloaded",this,3)([]),this.state.isVisible&&this.controller.action(O.onDisplayHandler,{isVisible:!1})}}])}(j.s),V=r(4718),G=r(42332),R=r(90675),U=r(10467),F=r(53662),W=function(e){function LiveMatchTrackerModuleHeightCalculationHandler(){var e;(0,n.A)(this,LiveMatchTrackerModuleHeightCalculationHandler);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(e=(0,o.A)(this,LiveMatchTrackerModuleHeightCalculationHandler,[].concat(r))).type=O.heightCalculation,e}return(0,c.A)(LiveMatchTrackerModuleHeightCalculationHandler,e),(0,i.A)(LiveMatchTrackerModuleHeightCalculationHandler,[{key:"action",value:function(){var e=(0,U.A)((0,R.A)().mark((function _callee(e){return(0,R.A)().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:this.store.setLMTHeight(e.width/this.state.ratio);case 1:case"end":return t.stop()}}),_callee,this)})));return function action(t){return e.apply(this,arguments)}}()}])}(F.n),B=r(4693),z=r(39721),Y=function(e){function LiveMatchTrackerModuleMatchDetailsLmtEvent(e,t){var r;return(0,n.A)(this,LiveMatchTrackerModuleMatchDetailsLmtEvent),(r=(0,o.A)(this,LiveMatchTrackerModuleMatchDetailsLmtEvent,[t,"lmt","match-details"])).gameId=e.gameId,r.status=e.status,r.duration=e.duration,r.provider=e.provider,r}return(0,c.A)(LiveMatchTrackerModuleMatchDetailsLmtEvent,e),(0,i.A)(LiveMatchTrackerModuleMatchDetailsLmtEvent,[{key:"properties",get:function get(){var e=(0,g.A)(LiveMatchTrackerModuleMatchDetailsLmtEvent,"properties",this,1);return e.gameId=this.gameId,e.status=this.status,e.duration=this.duration,e.provider=this.provider,e}}])}(r(53156).U),$=function(e){function LiveMatchTrackerModuleMatchDetailsEventLoadHandler(){var e;(0,n.A)(this,LiveMatchTrackerModuleMatchDetailsEventLoadHandler);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(e=(0,o.A)(this,LiveMatchTrackerModuleMatchDetailsEventLoadHandler,[].concat(r))).type=x.ACTION_TYPES.onLoadLiveTracker,e}return(0,c.A)(LiveMatchTrackerModuleMatchDetailsEventLoadHandler,e),(0,i.A)(LiveMatchTrackerModuleMatchDetailsEventLoadHandler,[{key:"action",value:function(){var e=(0,U.A)((0,R.A)().mark((function _callee(e){var t;return(0,R.A)().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:t=new Y(e,x.EVENT_NAMES.load),this.analyticsService.createEvent(t);case 2:case"end":return r.stop()}}),_callee,this)})));return function action(t){return e.apply(this,arguments)}}()}])}(B.n);$.injectables=[z.c];var X=function(e){function LiveMatchTrackerModuleMatchDetailsEventDisplayHandler(){var e;(0,n.A)(this,LiveMatchTrackerModuleMatchDetailsEventDisplayHandler);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(e=(0,o.A)(this,LiveMatchTrackerModuleMatchDetailsEventDisplayHandler,[].concat(r))).type=x.ACTION_TYPES.onDisplayLiveTracker,e}return(0,c.A)(LiveMatchTrackerModuleMatchDetailsEventDisplayHandler,e),(0,i.A)(LiveMatchTrackerModuleMatchDetailsEventDisplayHandler,[{key:"action",value:function(){var e=(0,U.A)((0,R.A)().mark((function _callee(e){var t;return(0,R.A)().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:t=new Y(e,x.EVENT_NAMES.display),this.analyticsService.createEvent(t);case 2:case"end":return r.stop()}}),_callee,this)})));return function action(t){return e.apply(this,arguments)}}()}])}(B.n);X.injectables=[z.c];var Q=r(66741),Z=function(e){function LiveMatchTrackerModuleDisplayHandler(e){var t;return(0,n.A)(this,LiveMatchTrackerModuleDisplayHandler),(t=(0,o.A)(this,LiveMatchTrackerModuleDisplayHandler)).type=O.onDisplayHandler,t.datetimeUtils=e,t}return(0,c.A)(LiveMatchTrackerModuleDisplayHandler,e),(0,i.A)(LiveMatchTrackerModuleDisplayHandler,[{key:"action",value:function(){var e=(0,U.A)((0,R.A)().mark((function _callee(e){return(0,R.A)().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:this.state.isVisible=e.isVisible,e.isVisible?this.clearDate():this.sendDisplayEvent();case 2:case"end":return t.stop()}}),_callee,this)})));return function action(t){return e.apply(this,arguments)}}()},{key:"sendDisplayEvent",value:function sendDisplayEvent(){this.controller.action(x.ACTION_TYPES.onDisplayLiveTracker,{gameId:this.state.gameId,status:Q.r.GAME_STATUSES[this.state.gameStatus],provider:this.state.widget.provider,duration:this.duration()})}},{key:"duration",value:function duration(){var e=new Date,t=this.datetimeUtils.diffSecondsByDate(e,this.startDurationDate).toFixed(x.FIXED_DIGITS_NUMBER);return this.startDurationDate=new Date,t}},{key:"clearDate",value:function clearDate(){this.startDurationDate=new Date}}])}(F.n);Z.injectables=[].concat((0,s.A)(F.n.injectables),[w.B]);var q=r(10114),J=function(e){function LiveMatchTrackerModuleHandlers(e,t,r,a,i,c,l){var s;return(0,n.A)(this,LiveMatchTrackerModuleHandlers),s=(0,o.A)(this,LiveMatchTrackerModuleHandlers),[e,t,r,a,i,c,l].forEach((function(e){return s.add(e)})),s}return(0,c.A)(LiveMatchTrackerModuleHandlers,e),(0,i.A)(LiveMatchTrackerModuleHandlers)}(V.b);J.injectables=[N,W,$,X,Z,G.x,q.k];var K=function(e){function LiveMatchTrackerModuleController(){return(0,n.A)(this,LiveMatchTrackerModuleController),(0,o.A)(this,LiveMatchTrackerModuleController,arguments)}return(0,c.A)(LiveMatchTrackerModuleController,e),(0,i.A)(LiveMatchTrackerModuleController)}(u.d);K.injectables=[].concat((0,s.A)(P.i.injectables),[p,_,J]);var ee=r(17380),te=function(e){function LiveMatchTrackerModuleProps(){return(0,n.A)(this,LiveMatchTrackerModuleProps),(0,o.A)(this,LiveMatchTrackerModuleProps,arguments)}return(0,c.A)(LiveMatchTrackerModuleProps,e),(0,i.A)(LiveMatchTrackerModuleProps)}(r(50204).Q),re=r(6984),ae=r(5544),ie=r(70483),ne=r(96580),oe=r.n(ne),ce=r(85582),le=function LiveMatchTrackerIframeContainer(e){var t=e.controller,r=t.state.device,i=l.createRef(),n=(0,l.useState)(!1),o=(0,ae.A)(n,2),c=o[0],s=o[1];(0,l.useEffect)((function(){t.action(O.heightCalculation,{width:i.current.offsetWidth}),t.action(x.ACTION_TYPES.onLoadLiveTracker,{gameId:t.state.gameId,status:Q.r.GAME_STATUSES[t.state.gameStatus],provider:t.state.widget.provider})}),[]);var u={src:t.state.url,ref:i,style:{border:0,width:"100%",height:c?t.state.height:0},onLoad:function onLoad(){return s(!0)}},h={keepObserving:!0,forceRender:!0,threshold:0,margin:r.isSmallView?x.MARGIN.mobile:x.MARGIN.desktop,onIntersect:function onIntersect(){return t.action(O.onDisplayHandler,{isVisible:!0})},onIntersectEnd:function onIntersectEnd(){return t.action(O.onDisplayHandler,{isVisible:!1})},targetContainerRef:i.current,style:{width:"100%",height:t.state.height,position:"relative"}};return(0,ce.jsxs)(ie.G,(0,a.A)((0,a.A)({},h),{},{children:[(0,ce.jsx)("iframe",(0,a.A)({title:"Live Match Tracker"},u)),(0,ce.jsx)("div",{style:{height:t.state.height},className:oe()("live-match-tracker-module-cover",{"live-match-tracker-module-loading":!c})})]}))},se=function(e){function LiveMatchTrackerModuleComponentProps(){return(0,n.A)(this,LiveMatchTrackerModuleComponentProps),(0,o.A)(this,LiveMatchTrackerModuleComponentProps,arguments)}return(0,c.A)(LiveMatchTrackerModuleComponentProps,e),(0,i.A)(LiveMatchTrackerModuleComponentProps)}(te),ue=function LiveMatchTrackerModuleComponent(e){var t=e.controller,r=e.showTitle,i=t.state.terms.GAME_OPTA_LAW_TITLE,n={controller:t,title:r?i:""};return(0,ce.jsx)(ee.o,(0,a.A)((0,a.A)({},n),{},{children:(0,ce.jsx)(le,{controller:t})}))},he={component:ue,propsType:se,shouldTriggerOnRenderComplete:!0,createModule:!0,observe:!0,controllerType:K},de=(0,re.L)(he)}}]);
//# sourceMappingURL=live-match-tracker-module.462dd60b.chunk.js.map